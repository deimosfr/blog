<!DOCTYPE html>
<html lang="en-us">
  <head>
    
    <script type="application/ld+json">

{  
  "@context":"http://schema.org",
  "@type":"Website",
  "@id":"https:\/\/blog.deimos.fr",
  "author": {
    "@type": "Person",
    "name": "Pierre Mavro / Deimosfr",
    
    "image": "https://www.gravatar.com/avatar/194382a6478d109ac45c9b11bad1945e"
    
  },
  "name":"Deimosfr Blog",
  "description":"In the last post, I talked about how to manage Docker and VirtualBox with Vagrant. This post follows the last one, with the integration of Ansible as a provisioner. Once again, I\u0026rsquo;m using it for the Smash project.\nWith Ansible, I made several \u0026ldquo;group_vars\u0026rdquo; files containing custom and common information related to the used environment (dev, uat, staging\u0026hellip;). This helps to setup different kind of environment easily. Vagrant will help to build images with Ansible deployed inside.",
  "url":"https:\/\/blog.deimos.fr\/2015\/01\/13\/vagrant-provision-vms-and-containers-with-ansible\/",
  "keywords":"[]"
}

</script>
    <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="generator" content="Hugo 0.88.1 with theme Tranquilpeak 0.5.2-BETA">
<meta name="author" content="Pierre Mavro / Deimosfr">
<meta name="keywords" content="">
<meta name="description" content="In the last post, I talked about how to manage Docker and VirtualBox with Vagrant. This post follows the last one, with the integration of Ansible as a provisioner. Once again, I&rsquo;m using it for the Smash project.
With Ansible, I made several &ldquo;group_vars&rdquo; files containing custom and common information related to the used environment (dev, uat, staging&hellip;). This helps to setup different kind of environment easily. Vagrant will help to build images with Ansible deployed inside.">


<meta property="og:description" content="In the last post, I talked about how to manage Docker and VirtualBox with Vagrant. This post follows the last one, with the integration of Ansible as a provisioner. Once again, I&rsquo;m using it for the Smash project.
With Ansible, I made several &ldquo;group_vars&rdquo; files containing custom and common information related to the used environment (dev, uat, staging&hellip;). This helps to setup different kind of environment easily. Vagrant will help to build images with Ansible deployed inside.">
<meta property="og:type" content="article">
<meta property="og:title" content="Vagrant: provision vms and containers with Ansible">
<meta name="twitter:title" content="Vagrant: provision vms and containers with Ansible">
<meta property="og:url" content="https://blog.deimos.fr/2015/01/13/vagrant-provision-vms-and-containers-with-ansible/">
<meta property="twitter:url" content="https://blog.deimos.fr/2015/01/13/vagrant-provision-vms-and-containers-with-ansible/">
<meta property="og:site_name" content="Deimosfr Blog">
<meta property="og:description" content="In the last post, I talked about how to manage Docker and VirtualBox with Vagrant. This post follows the last one, with the integration of Ansible as a provisioner. Once again, I&rsquo;m using it for the Smash project.
With Ansible, I made several &ldquo;group_vars&rdquo; files containing custom and common information related to the used environment (dev, uat, staging&hellip;). This helps to setup different kind of environment easily. Vagrant will help to build images with Ansible deployed inside.">
<meta name="twitter:description" content="In the last post, I talked about how to manage Docker and VirtualBox with Vagrant. This post follows the last one, with the integration of Ansible as a provisioner. Once again, I&rsquo;m using it for the Smash project.
With Ansible, I made several &ldquo;group_vars&rdquo; files containing custom and common information related to the used environment (dev, uat, staging&hellip;). This helps to setup different kind of environment easily. Vagrant will help to build images with Ansible deployed inside.">
<meta property="og:locale" content="en-us">

  
    <meta property="article:published_time" content="2015-01-13T11:00:15">
  
  
    <meta property="article:modified_time" content="2015-01-13T11:00:15">
  
  
  
    
      <meta property="article:section" content="Ansible">
    
      <meta property="article:section" content="Debian">
    
      <meta property="article:section" content="Hi-Tech">
    
      <meta property="article:section" content="Linux">
    
      <meta property="article:section" content="Red Hat">
    
      <meta property="article:section" content="Vagrant">
    
      <meta property="article:section" content="Virtualization">
    
  
  
    
      <meta property="article:tag" content="ansible">
    
      <meta property="article:tag" content="docker">
    
      <meta property="article:tag" content="vagrant">
    
      <meta property="article:tag" content="virtualbox">
    
  


<meta name="twitter:card" content="summary">

  <meta name="twitter:site" content="@deimosfr">


  <meta name="twitter:creator" content="@deimosfr">






  <meta property="og:image" content="https://www.gravatar.com/avatar/194382a6478d109ac45c9b11bad1945e?s=640">
  <meta property="twitter:image" content="https://www.gravatar.com/avatar/194382a6478d109ac45c9b11bad1945e?s=640">





  <meta property="og:image" content="https://blog.deimos.fr/thumbnails/logo_vagrant.png">
  <meta property="twitter:image" content="https://blog.deimos.fr/thumbnails/logo_vagrant.png">


    <title>Vagrant: provision vms and containers with Ansible</title>

    <link rel="icon" href="https://blog.deimos.fr/favicon.png">
    

    

    <link rel="canonical" href="https://blog.deimos.fr/2015/01/13/vagrant-provision-vms-and-containers-with-ansible/">

    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css" integrity="sha512-iBBXm8fW90+nuLcSKlbmrPcLa0OT92xO1BIsZ+ywDWZCvqsWgccV3gFoRBv0z+8dLJgyAHIhR35VZc2oM/gI1w==" crossorigin="anonymous" referrerpolicy="no-referrer" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/fancybox/3.5.7/jquery.fancybox.min.css" integrity="sha512-H9jrZiiopUdsLpg94A333EfumgUBpO9MdbxStdeITo+KEIMaNfHNvwyjjDJb+ERPaRS6DpyRlKbvPUasNItRyw==" crossorigin="anonymous" referrerpolicy="no-referrer" />
    
    
    
    <link rel="stylesheet" href="https://blog.deimos.fr/css/style-c5yjx2losbmkttdif4mskx5f9pqjjquywurgngxfvceyyrtyatseix5hpd.min.css" />
    
    
      
        <link rel="stylesheet"  href="https://blog.deimos.fr/css/custom.css">
      
    

    
      
<script type="application/javascript">
var doNotTrack = false;
if (!doNotTrack) {
	(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
	(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
	m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
	})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
	ga('create', 'UA-63927289-1', 'auto');
	
	ga('send', 'pageview');
}
</script>
    
    
  </head>

  <body>
    <div id="blog">
      <header id="header" data-behavior="5">
  <i id="btn-open-sidebar" class="fa fa-lg fa-bars"></i>
  <div class="header-title">
    <a class="header-title-link" href="https://blog.deimos.fr/" aria-label="Go to homepage">Deimosfr Blog</a>
  </div>
  
    
      <a class="header-right-picture "
         href="https://blog.deimos.fr/#about" aria-label="Open the link: /#about">
    
    
    
      
        <img class="header-picture" src="https://www.gravatar.com/avatar/194382a6478d109ac45c9b11bad1945e?s=90" alt="Author&#39;s picture" />
      
    
    </a>
  
</header>

      <nav id="sidebar" data-behavior="5">
  <div class="sidebar-container">
    
      <div class="sidebar-profile">
        <a href="https://blog.deimos.fr/#about" aria-label="Read more about the author">
          <img class="sidebar-profile-picture" src="https://www.gravatar.com/avatar/194382a6478d109ac45c9b11bad1945e?s=110" alt="Author&#39;s picture" />
        </a>
        <h4 class="sidebar-profile-name">Pierre Mavro / Deimosfr</h4>
        
      </div>
    
    <ul class="sidebar-buttons">
      
  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="https://blog.deimos.fr/" title="Home">
    
      <i class="sidebar-button-icon fa fa-lg fa-home"></i>
      
      <span class="sidebar-button-desc">Home</span>
    </a>
  </li>

  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="https://blog.deimos.fr/archives" title="Archives">
    
      <i class="sidebar-button-icon fa fa-lg fa-archive"></i>
      
      <span class="sidebar-button-desc">Archives</span>
    </a>
  </li>

  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="https://blog.deimos.fr/categories" title="Categories">
    
      <i class="sidebar-button-icon fa fa-lg fa-bookmark"></i>
      
      <span class="sidebar-button-desc">Categories</span>
    </a>
  </li>

  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="https://blog.deimos.fr/tags" title="Tags">
    
      <i class="sidebar-button-icon fa fa-lg fa-tags"></i>
      
      <span class="sidebar-button-desc">Tags</span>
    </a>
  </li>

  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="https://blog.deimos.fr/index.xml" title="RSS">
    
      <i class="sidebar-button-icon fa fa-lg fa-rss"></i>
      
      <span class="sidebar-button-desc">RSS</span>
    </a>
  </li>


    </ul>
    <ul class="sidebar-buttons">
      

    </ul>
    <ul class="sidebar-buttons">
      
  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="https://www.deimos.fr" target="_blank" rel="noopener" title="About">
    
      <i class="sidebar-button-icon fa fa-lg fa-user"></i>
      
      <span class="sidebar-button-desc">About</span>
    </a>
  </li>

  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="https://wiki.deimos.fr" target="_blank" rel="noopener" title="Wiki">
    
      <i class="sidebar-button-icon fa fa-wikipedia-w"></i>
      
      <span class="sidebar-button-desc">Wiki</span>
    </a>
  </li>


    </ul>
  </div>
</nav>

      

      <div id="main" data-behavior="5"
        class="
               hasCoverMetaIn
               ">
        <article class="post" id="top">
          
          
            <div class="post-header main-content-wrap text-left">
  
    <h1 class="post-title">
      Vagrant: provision vms and containers with Ansible
    </h1>
  
  
  <div class="postShorten-meta post-meta">
    
      <time datetime="2015-01-13T11:00:15Z">
        
  
  
  
  
    13 January 2015
  

      </time>
    
    
  
  
    <span>in</span>
    
      <a class="category-link" href="https://blog.deimos.fr/categories/ansible">Ansible</a>, 
    
      <a class="category-link" href="https://blog.deimos.fr/categories/debian">Debian</a>, 
    
      <a class="category-link" href="https://blog.deimos.fr/categories/hi-tech">Hi-Tech</a>, 
    
      <a class="category-link" href="https://blog.deimos.fr/categories/linux">Linux</a>, 
    
      <a class="category-link" href="https://blog.deimos.fr/categories/red-hat">Red Hat</a>, 
    
      <a class="category-link" href="https://blog.deimos.fr/categories/vagrant">Vagrant</a>, 
    
      <a class="category-link" href="https://blog.deimos.fr/categories/virtualization">Virtualization</a>
    
  

  </div>

</div>
          
          <div class="post-content markdown">
            <div class="main-content-wrap">
              <p><img src="https://blog.deimos.fr/images/logo_vagrant.png" alt="Vagrant-logo"></p>
<p>In the last post, I talked about how <a href="https://blog.deimos.fr/?p=5290">to manage Docker and VirtualBox with Vagrant</a>. This post follows the last one, with the integration of Ansible as a provisioner. Once again, I&rsquo;m using it for the <a href="http://www.usmash.me/">Smash</a> project.</p>
<p>With Ansible, I made several &ldquo;group_vars&rdquo; files containing custom and common information related to the used environment (dev, uat, staging&hellip;). This helps to setup different kind of environment easily. Vagrant will help to build images with Ansible deployed inside. Also it will construct on the fly a list of inventory hosts that will be used by Ansible. Let&rsquo;s see what you can get and how!</p>
<p>First, we&rsquo;re taking back the Vagrantfile (like the previous post), but you&rsquo;ll notice some differences due to Ansible:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-ruby" data-lang="ruby"><span class="c1"># -*- mode: ruby -*-</span>
<span class="c1"># vi: set ft=ruby :</span>

<span class="c1"># Examples:</span>
<span class="c1"># VAGRANT_DEPLOY_ENV=&#39;preprod&#39; vagrant up</span>

<span class="c1"># Vagrantfile API/syntax version. Don&#39;t touch unless you know what you&#39;re doing!</span>
<span class="no">VAGRANTFILE_API_VERSION</span> <span class="o">=</span> <span class="s2">&#34;2&#34;</span>

<span class="c1"># You can override those vars by using shell environment vars </span>
<span class="n">deploy_env</span> <span class="o">=</span> <span class="p">(</span><span class="no">ENV</span><span class="o">[</span><span class="s1">&#39;VAGRANT_DEPLOY_ENV&#39;</span><span class="o">]</span> <span class="o">||</span> <span class="s1">&#39;dev&#39;</span><span class="p">)</span>
<span class="n">vb_box</span> <span class="o">=</span> <span class="p">(</span><span class="no">ENV</span><span class="o">[</span><span class="s1">&#39;VAGRANT_VB_BOX&#39;</span><span class="o">]</span> <span class="o">||</span> <span class="s1">&#39;deimosfr/debian-wheezy&#39;</span><span class="p">)</span>
<span class="c1"># Workaround for mitchellh/vagrant#1867 / source: https://groups.google.com/forum/#!topic/vagrant-up/XIxGdm78s4I</span>
<span class="k">if</span> <span class="no">ARGV</span><span class="o">[</span><span class="mi">1</span><span class="o">]</span> <span class="ow">and</span> <span class="p">\</span>
    <span class="p">(</span><span class="no">ARGV</span><span class="o">[</span><span class="mi">1</span><span class="o">].</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;=&#39;</span><span class="p">)</span><span class="o">[</span><span class="mi">0</span><span class="o">]</span> <span class="o">==</span> <span class="s2">&#34;--provider&#34;</span> <span class="ow">or</span> <span class="no">ARGV</span><span class="o">[</span><span class="mi">2</span><span class="o">]</span><span class="p">)</span>
    <span class="n">provider</span> <span class="o">=</span> <span class="p">(</span><span class="no">ARGV</span><span class="o">[</span><span class="mi">1</span><span class="o">].</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;=&#39;</span><span class="p">)</span><span class="o">[</span><span class="mi">1</span><span class="o">]</span> <span class="o">||</span> <span class="no">ARGV</span><span class="o">[</span><span class="mi">2</span><span class="o">]</span><span class="p">)</span>
<span class="k">else</span>
    <span class="n">provider</span> <span class="o">=</span> <span class="p">(</span><span class="no">ENV</span><span class="o">[</span><span class="s1">&#39;VAGRANT_DEFAULT_PROVIDER&#39;</span><span class="o">]</span> <span class="o">||</span> <span class="ss">:virtualbox</span><span class="p">)</span><span class="o">.</span><span class="n">to_sym</span>
<span class="k">end</span>

<span class="c1"># Show used vars</span>
<span class="nb">puts</span> <span class="s2">&#34;==&amp;gt; Using </span><span class="si">#{</span><span class="n">provider</span><span class="si">}</span><span class="s2"> provider&#34;</span>
<span class="nb">puts</span> <span class="s2">&#34;==&amp;gt; Deploying Ansible </span><span class="si">#{</span><span class="n">deploy_env</span><span class="si">}</span><span class="s2"> environment&#34;</span></code></pre></div>
<p>This part include the environment I want to deploy, the provider to use and the Vagrant image box I need to use to launch my VM.</p>
<p>The provider part is simple for VirtualBox as nothing has to be done with most of boxes you can find on Atlas (ex Vagrant Cloud). However, for the Docker provider, you have to be sure that an SSH server is present, started and a Vagrant key is present for the root user (as no Vagrant user exist by default). The Vagrant part should looks like this:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-ruby" data-lang="ruby"><span class="no">Vagrant</span><span class="o">.</span><span class="n">configure</span><span class="p">(</span><span class="no">VAGRANTFILE_API_VERSION</span><span class="p">)</span> <span class="k">do</span> <span class="o">|</span><span class="n">config</span><span class="o">|</span>

    <span class="c1"># Common settings</span>
    <span class="n">config</span><span class="o">.</span><span class="n">ssh</span><span class="o">.</span><span class="n">insert_key</span> <span class="o">=</span> <span class="kp">false</span>
    <span class="n">config</span><span class="o">.</span><span class="n">ssh</span><span class="o">.</span><span class="n">forward_agent</span> <span class="o">=</span> <span class="kp">true</span>

    <span class="c1"># VirtualBox settings</span>
    <span class="k">if</span> <span class="s2">&#34;</span><span class="si">#{</span><span class="n">provider</span><span class="si">}</span><span class="s2">&#34;</span> <span class="o">==</span> <span class="s2">&#34;virtualbox&#34;</span>
        <span class="n">config</span><span class="o">.</span><span class="n">vm</span><span class="o">.</span><span class="n">provider</span> <span class="s2">&#34;virtualbox&#34;</span> <span class="k">do</span> <span class="o">|</span><span class="n">vb</span><span class="o">|</span>
            <span class="n">config</span><span class="o">.</span><span class="n">vm</span><span class="o">.</span><span class="n">box</span> <span class="o">=</span> <span class="s2">&#34;</span><span class="si">#{</span><span class="n">vb_box</span><span class="si">}</span><span class="s2">&#34;</span>
        <span class="k">end</span>
    <span class="k">end</span>

    <span class="c1"># Docker settings</span>
    <span class="k">if</span> <span class="s2">&#34;</span><span class="si">#{</span><span class="n">provider</span><span class="si">}</span><span class="s2">&#34;</span> <span class="o">==</span> <span class="s2">&#34;docker&#34;</span>
        <span class="n">config</span><span class="o">.</span><span class="n">vm</span><span class="o">.</span><span class="n">provider</span> <span class="s2">&#34;docker&#34;</span> <span class="k">do</span> <span class="o">|</span><span class="n">d</span><span class="o">|</span>
            <span class="n">d</span><span class="o">.</span><span class="n">build_dir</span> <span class="o">=</span> <span class="s2">&#34;.&#34;</span>
            <span class="n">d</span><span class="o">.</span><span class="n">remains_running</span> <span class="o">=</span> <span class="kp">true</span>
            <span class="n">d</span><span class="o">.</span><span class="n">has_ssh</span> <span class="o">=</span> <span class="kp">true</span>
            <span class="n">config</span><span class="o">.</span><span class="n">ssh</span><span class="o">.</span><span class="n">username</span> <span class="o">=</span> <span class="s2">&#34;root&#34;</span>
        <span class="k">end</span>
    <span class="k">end</span></code></pre></div>
<p>For the Docker part, I&rsquo;m using a Dockerfile which looks like this to start SSH server (required for Ansible):</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash">FROM debian:wheezy
<span class="c1"># Start SSHd</span>
EXPOSE <span class="m">22</span>
CMD <span class="o">[</span><span class="s2">&#34;/usr/sbin/sshd&#34;</span>, <span class="s2">&#34;-D&#34;</span><span class="o">]</span></code></pre></div>
<p>Regarding the definition of the VM, you need to forward your SSH agent to make it work with Ansible:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-ruby" data-lang="ruby"><span class="c1"># Web servers</span>
    <span class="n">config</span><span class="o">.</span><span class="n">vm</span><span class="o">.</span><span class="n">define</span> <span class="s1">&#39;web1&#39;</span> <span class="k">do</span> <span class="o">|</span><span class="n">machine</span><span class="o">|</span>
        <span class="n">config</span><span class="o">.</span><span class="n">vm</span><span class="o">.</span><span class="n">host_name</span> <span class="o">=</span> <span class="s1">&#39;web1&#39;</span>
        <span class="n">config</span><span class="o">.</span><span class="n">vm</span><span class="o">.</span><span class="n">provider</span> <span class="s2">&#34;virtualbox&#34;</span> <span class="k">do</span> <span class="o">|</span><span class="n">vb</span><span class="o">|</span>
            <span class="n">vb</span><span class="o">.</span><span class="n">customize</span> <span class="o">[</span><span class="s2">&#34;modifyvm&#34;</span><span class="p">,</span> <span class="ss">:id</span><span class="p">,</span> <span class="s2">&#34;--memory&#34;</span><span class="p">,</span> <span class="s2">&#34;384&#34;</span><span class="o">]</span>
        <span class="k">end</span>
        <span class="n">config</span><span class="o">.</span><span class="n">vm</span><span class="o">.</span><span class="n">network</span> <span class="s2">&#34;public_network&#34;</span><span class="p">,</span> <span class="ss">:bridge</span> <span class="o">=&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="s1">&#39;wlan0&#39;</span>
    <span class="k">end</span>

    <span class="c1"># SQL servers</span>
    <span class="n">config</span><span class="o">.</span><span class="n">vm</span><span class="o">.</span><span class="n">define</span> <span class="s1">&#39;sql1&#39;</span> <span class="k">do</span> <span class="o">|</span><span class="n">machine</span><span class="o">|</span>
        <span class="n">config</span><span class="o">.</span><span class="n">vm</span><span class="o">.</span><span class="n">host_name</span> <span class="o">=</span> <span class="s1">&#39;sql1&#39;</span>
        <span class="n">config</span><span class="o">.</span><span class="n">vm</span><span class="o">.</span><span class="n">provider</span> <span class="s2">&#34;virtualbox&#34;</span> <span class="k">do</span> <span class="o">|</span><span class="n">vb</span><span class="o">|</span>
            <span class="n">vb</span><span class="o">.</span><span class="n">customize</span> <span class="o">[</span><span class="s2">&#34;modifyvm&#34;</span><span class="p">,</span> <span class="ss">:id</span><span class="p">,</span> <span class="s2">&#34;--memory&#34;</span><span class="p">,</span> <span class="s2">&#34;512&#34;</span><span class="o">]</span>
        <span class="k">end</span>
        <span class="n">config</span><span class="o">.</span><span class="n">vm</span><span class="o">.</span><span class="n">network</span> <span class="s2">&#34;public_network&#34;</span><span class="p">,</span> <span class="ss">:bridge</span> <span class="o">=&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="s1">&#39;wlan0&#39;</span>
    <span class="k">end</span></code></pre></div>
<p>As we&rsquo;re talking about forwarding agent, I had an issue with sudo usage. My goal was to clone a private repository on GitHub. But the agent wasn&rsquo;t forwarded when I was using sudo command. That&rsquo;s why, I got an Ansible playbook rule for it configuring the sudoers file:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-yaml" data-lang="yaml"><span class="nn">---</span><span class="w">
</span><span class="w"></span>- <span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l">Make sure ssh-agent is forwarded via sudo</span><span class="w">
</span><span class="w">  </span><span class="nt">lineinfile</span><span class="p">:</span><span class="w"> </span><span class="l">dest=/etc/sudoers state=present regexp=&#39;^Defaults env_keep\+\=SSH_AUTH_SOCK&#39; line=&#39;Defaults env_keep+=SSH_AUTH_SOCK&#39;</span></code></pre></div>
<p>This line export the environment var &ldquo;SSH_AUTH_SOCK&rdquo; with sudo. That means, my personal SSH key is forwarded to the VM with Vagrant (with vagrant user) and then is used with root user with the help of sudo. And that&rsquo;s not finished! We have to play with the Ansible provisioner as well to force the key forwarding:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-ruby" data-lang="ruby"><span class="n">config</span><span class="o">.</span><span class="n">vm</span><span class="o">.</span><span class="n">provision</span> <span class="s2">&#34;ansible&#34;</span> <span class="k">do</span> <span class="o">|</span><span class="n">ansible</span><span class="o">|</span>
        <span class="n">ansible</span><span class="o">.</span><span class="n">sudo</span> <span class="o">=</span> <span class="kp">true</span>
        <span class="n">ansible</span><span class="o">.</span><span class="n">host_key_checking</span> <span class="o">=</span> <span class="kp">false</span>
        <span class="n">ansible</span><span class="o">.</span><span class="n">raw_ssh_args</span> <span class="o">=</span> <span class="o">[</span><span class="s1">&#39;-o UserKnownHostsFile=/dev/null&#39;</span><span class="o">]</span>
        <span class="n">ansible</span><span class="o">.</span><span class="n">playbook</span> <span class="o">=</span> <span class="s2">&#34;site.yml&#34;</span>
        <span class="c1">#ansible.verbose = &#39;v&#39;</span>
        <span class="c1">#ansible.verbose = &#39;vvv&#39;</span>
        <span class="c1">#ansible.limit = &#39;web1&#39;</span>
        <span class="c1">#ansible.tags = [&#39;smash&#39;]</span>
        <span class="n">ansible</span><span class="o">.</span><span class="n">groups</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s1">&#39;web&#39;</span> <span class="o">=&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="o">[</span><span class="s1">&#39;web1&#39;</span><span class="o">]</span><span class="p">,</span>
            <span class="s1">&#39;webapp&#39;</span> <span class="o">=&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="o">[</span><span class="s1">&#39;web1&#39;</span><span class="o">]</span><span class="p">,</span>
            <span class="s1">&#39;sql&#39;</span> <span class="o">=&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="o">[</span><span class="s1">&#39;sql1&#39;</span><span class="o">]</span>
        <span class="p">}</span>
        <span class="n">ansible</span><span class="o">.</span><span class="n">extra_vars</span> <span class="o">=</span> <span class="p">{</span>
            <span class="ss">ansible_ssh_user</span><span class="p">:</span> <span class="s1">&#39;vagrant&#39;</span><span class="p">,</span>
            <span class="ss">ansible_connection</span><span class="p">:</span> <span class="s1">&#39;ssh&#39;</span><span class="p">,</span>
            <span class="ss">ansible_ssh_args</span><span class="p">:</span> <span class="s1">&#39;-o ForwardAgent=yes -A&#39;</span><span class="p">,</span>
            <span class="ss">set_env</span><span class="p">:</span> <span class="s2">&#34;</span><span class="si">#{</span><span class="n">deploy_env</span><span class="si">}</span><span class="s2">&#34;</span><span class="p">,</span>
        <span class="p">}</span>
    <span class="k">end</span></code></pre></div>
<p>I&rsquo;m using sudo for the VirtualBox part and require a vagrant user for Docker. I also don&rsquo;t want to check the host key. The following things related to Ansible should remind you something if you&rsquo;re familiar with it. Regarding the Ansible groups, here is how to help Vagrant to build on the fly the inventory. You have to define your groups and define which server belongs to which group in your default YAML file. Extra vars are used to force Vagrant user to be used and the ForwardAgent to be used (still to clone private repository requiring your private key).</p>
<p>We also need to activate sudo (even with root user) in the Ansible playbook configuration (site.yml):</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-yaml" data-lang="yaml"><span class="nn">---</span><span class="w">
</span><span class="w"></span><span class="c"># All machines</span><span class="w">
</span><span class="w"></span>- <span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l">common</span><span class="w">
</span><span class="w">  </span><span class="nt">hosts</span><span class="p">:</span><span class="w"> </span><span class="l">all</span><span class="w">
</span><span class="w">  </span><span class="nt">user</span><span class="p">:</span><span class="w"> </span><span class="l">root</span><span class="w">
</span><span class="w">  </span><span class="nt">sudo</span><span class="p">:</span><span class="w"> </span><span class="kc">yes</span><span class="w">
</span><span class="w">  </span><span class="nt">roles</span><span class="p">:</span><span class="w">
</span><span class="w">    </span>- <span class="l">common</span><span class="w">
</span><span class="w"></span><span class="nn">...</span></code></pre></div>
<p>The complete Vagrantfile looks like this:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-ruby" data-lang="ruby"><span class="c1"># -*- mode: ruby -*-</span>
<span class="c1"># vi: set ft=ruby :</span>

<span class="c1"># Examples:</span>
<span class="c1"># VAGRANT_DEPLOY_ENV=&#39;preprod&#39; vagrant up</span>

<span class="c1"># Vagrantfile API/syntax version. Don&#39;t touch unless you know what you&#39;re doing!</span>
<span class="no">VAGRANTFILE_API_VERSION</span> <span class="o">=</span> <span class="s2">&#34;2&#34;</span>

<span class="c1"># You can override those vars by using shell environment vars </span>
<span class="n">deploy_env</span> <span class="o">=</span> <span class="p">(</span><span class="no">ENV</span><span class="o">[</span><span class="s1">&#39;VAGRANT_DEPLOY_ENV&#39;</span><span class="o">]</span> <span class="o">||</span> <span class="s1">&#39;dev&#39;</span><span class="p">)</span>
<span class="n">vb_box</span> <span class="o">=</span> <span class="p">(</span><span class="no">ENV</span><span class="o">[</span><span class="s1">&#39;VAGRANT_VB_BOX&#39;</span><span class="o">]</span> <span class="o">||</span> <span class="s1">&#39;deimosfr/debian-wheezy&#39;</span><span class="p">)</span>
<span class="c1"># Workaround for mitchellh/vagrant#1867 / source: https://groups.google.com/forum/#!topic/vagrant-up/XIxGdm78s4I</span>
<span class="k">if</span> <span class="no">ARGV</span><span class="o">[</span><span class="mi">1</span><span class="o">]</span> <span class="ow">and</span> <span class="p">\</span>
    <span class="p">(</span><span class="no">ARGV</span><span class="o">[</span><span class="mi">1</span><span class="o">].</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;=&#39;</span><span class="p">)</span><span class="o">[</span><span class="mi">0</span><span class="o">]</span> <span class="o">==</span> <span class="s2">&#34;--provider&#34;</span> <span class="ow">or</span> <span class="no">ARGV</span><span class="o">[</span><span class="mi">2</span><span class="o">]</span><span class="p">)</span>
    <span class="n">provider</span> <span class="o">=</span> <span class="p">(</span><span class="no">ARGV</span><span class="o">[</span><span class="mi">1</span><span class="o">].</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;=&#39;</span><span class="p">)</span><span class="o">[</span><span class="mi">1</span><span class="o">]</span> <span class="o">||</span> <span class="no">ARGV</span><span class="o">[</span><span class="mi">2</span><span class="o">]</span><span class="p">)</span>
<span class="k">else</span>
    <span class="n">provider</span> <span class="o">=</span> <span class="p">(</span><span class="no">ENV</span><span class="o">[</span><span class="s1">&#39;VAGRANT_DEFAULT_PROVIDER&#39;</span><span class="o">]</span> <span class="o">||</span> <span class="ss">:virtualbox</span><span class="p">)</span><span class="o">.</span><span class="n">to_sym</span>
<span class="k">end</span>

<span class="c1"># Show used vars</span>
<span class="nb">puts</span> <span class="s2">&#34;==&amp;gt; Using </span><span class="si">#{</span><span class="n">provider</span><span class="si">}</span><span class="s2"> provider&#34;</span>
<span class="nb">puts</span> <span class="s2">&#34;==&amp;gt; Deploying Ansible </span><span class="si">#{</span><span class="n">deploy_env</span><span class="si">}</span><span class="s2"> environment&#34;</span>

<span class="no">Vagrant</span><span class="o">.</span><span class="n">configure</span><span class="p">(</span><span class="no">VAGRANTFILE_API_VERSION</span><span class="p">)</span> <span class="k">do</span> <span class="o">|</span><span class="n">config</span><span class="o">|</span>

    <span class="c1"># Common settings</span>
    <span class="n">config</span><span class="o">.</span><span class="n">ssh</span><span class="o">.</span><span class="n">insert_key</span> <span class="o">=</span> <span class="kp">false</span>
    <span class="n">config</span><span class="o">.</span><span class="n">ssh</span><span class="o">.</span><span class="n">forward_agent</span> <span class="o">=</span> <span class="kp">true</span>

    <span class="c1"># VirtualBox settings</span>
    <span class="k">if</span> <span class="s2">&#34;</span><span class="si">#{</span><span class="n">provider</span><span class="si">}</span><span class="s2">&#34;</span> <span class="o">==</span> <span class="s2">&#34;virtualbox&#34;</span>
        <span class="n">config</span><span class="o">.</span><span class="n">vm</span><span class="o">.</span><span class="n">provider</span> <span class="s2">&#34;virtualbox&#34;</span> <span class="k">do</span> <span class="o">|</span><span class="n">vb</span><span class="o">|</span>
            <span class="n">config</span><span class="o">.</span><span class="n">vm</span><span class="o">.</span><span class="n">box</span> <span class="o">=</span> <span class="s2">&#34;</span><span class="si">#{</span><span class="n">vb_box</span><span class="si">}</span><span class="s2">&#34;</span>
        <span class="k">end</span>
    <span class="k">end</span>

    <span class="c1"># Docker settings</span>
    <span class="k">if</span> <span class="s2">&#34;</span><span class="si">#{</span><span class="n">provider</span><span class="si">}</span><span class="s2">&#34;</span> <span class="o">==</span> <span class="s2">&#34;docker&#34;</span>
        <span class="n">config</span><span class="o">.</span><span class="n">vm</span><span class="o">.</span><span class="n">provider</span> <span class="s2">&#34;docker&#34;</span> <span class="k">do</span> <span class="o">|</span><span class="n">d</span><span class="o">|</span>
            <span class="n">d</span><span class="o">.</span><span class="n">build_dir</span> <span class="o">=</span> <span class="s2">&#34;.&#34;</span>
            <span class="n">d</span><span class="o">.</span><span class="n">remains_running</span> <span class="o">=</span> <span class="kp">true</span>
            <span class="n">d</span><span class="o">.</span><span class="n">has_ssh</span> <span class="o">=</span> <span class="kp">true</span>
            <span class="n">config</span><span class="o">.</span><span class="n">ssh</span><span class="o">.</span><span class="n">username</span> <span class="o">=</span> <span class="s2">&#34;root&#34;</span>
        <span class="k">end</span>
    <span class="k">end</span>

    <span class="c1"># Web servers</span>
    <span class="n">config</span><span class="o">.</span><span class="n">vm</span><span class="o">.</span><span class="n">define</span> <span class="s1">&#39;web1&#39;</span> <span class="k">do</span> <span class="o">|</span><span class="n">machine</span><span class="o">|</span>
        <span class="n">config</span><span class="o">.</span><span class="n">vm</span><span class="o">.</span><span class="n">host_name</span> <span class="o">=</span> <span class="s1">&#39;web1&#39;</span>
        <span class="n">config</span><span class="o">.</span><span class="n">vm</span><span class="o">.</span><span class="n">provider</span> <span class="s2">&#34;virtualbox&#34;</span> <span class="k">do</span> <span class="o">|</span><span class="n">vb</span><span class="o">|</span>
            <span class="n">vb</span><span class="o">.</span><span class="n">customize</span> <span class="o">[</span><span class="s2">&#34;modifyvm&#34;</span><span class="p">,</span> <span class="ss">:id</span><span class="p">,</span> <span class="s2">&#34;--memory&#34;</span><span class="p">,</span> <span class="s2">&#34;384&#34;</span><span class="o">]</span>
        <span class="k">end</span>
        <span class="n">config</span><span class="o">.</span><span class="n">vm</span><span class="o">.</span><span class="n">network</span> <span class="s2">&#34;public_network&#34;</span><span class="p">,</span> <span class="ss">:bridge</span> <span class="o">=&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="s1">&#39;wlan0&#39;</span>
    <span class="k">end</span>

    <span class="c1"># SQL servers</span>
    <span class="n">config</span><span class="o">.</span><span class="n">vm</span><span class="o">.</span><span class="n">define</span> <span class="s1">&#39;sql1&#39;</span> <span class="k">do</span> <span class="o">|</span><span class="n">machine</span><span class="o">|</span>
        <span class="n">config</span><span class="o">.</span><span class="n">vm</span><span class="o">.</span><span class="n">host_name</span> <span class="o">=</span> <span class="s1">&#39;sql1&#39;</span>
        <span class="n">config</span><span class="o">.</span><span class="n">vm</span><span class="o">.</span><span class="n">provider</span> <span class="s2">&#34;virtualbox&#34;</span> <span class="k">do</span> <span class="o">|</span><span class="n">vb</span><span class="o">|</span>
            <span class="n">vb</span><span class="o">.</span><span class="n">customize</span> <span class="o">[</span><span class="s2">&#34;modifyvm&#34;</span><span class="p">,</span> <span class="ss">:id</span><span class="p">,</span> <span class="s2">&#34;--memory&#34;</span><span class="p">,</span> <span class="s2">&#34;512&#34;</span><span class="o">]</span>
        <span class="k">end</span>
        <span class="n">config</span><span class="o">.</span><span class="n">vm</span><span class="o">.</span><span class="n">network</span> <span class="s2">&#34;public_network&#34;</span><span class="p">,</span> <span class="ss">:bridge</span> <span class="o">=&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="s1">&#39;wlan0&#39;</span>
    <span class="k">end</span>

    <span class="c1"># Deploy ansible playbook</span>
    <span class="n">config</span><span class="o">.</span><span class="n">vm</span><span class="o">.</span><span class="n">provision</span> <span class="s2">&#34;ansible&#34;</span> <span class="k">do</span> <span class="o">|</span><span class="n">ansible</span><span class="o">|</span>
        <span class="n">ansible</span><span class="o">.</span><span class="n">sudo</span> <span class="o">=</span> <span class="kp">true</span>
        <span class="n">ansible</span><span class="o">.</span><span class="n">host_key_checking</span> <span class="o">=</span> <span class="kp">false</span>
        <span class="n">ansible</span><span class="o">.</span><span class="n">raw_ssh_args</span> <span class="o">=</span> <span class="o">[</span><span class="s1">&#39;-o UserKnownHostsFile=/dev/null&#39;</span><span class="o">]</span>
        <span class="n">ansible</span><span class="o">.</span><span class="n">playbook</span> <span class="o">=</span> <span class="s2">&#34;site.yml&#34;</span>
        <span class="c1">#ansible.verbose = &#39;v&#39;</span>
        <span class="c1">#ansible.verbose = &#39;vvv&#39;</span>
        <span class="c1">#ansible.limit = &#39;web1&#39;</span>
        <span class="c1">#ansible.tags = [&#39;smash&#39;]</span>
        <span class="n">ansible</span><span class="o">.</span><span class="n">groups</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s1">&#39;web&#39;</span> <span class="o">=&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="o">[</span><span class="s1">&#39;web1&#39;</span><span class="o">]</span><span class="p">,</span>
            <span class="s1">&#39;webapp&#39;</span> <span class="o">=&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="o">[</span><span class="s1">&#39;web1&#39;</span><span class="o">]</span><span class="p">,</span>
            <span class="s1">&#39;sql&#39;</span> <span class="o">=&amp;</span><span class="n">gt</span><span class="p">;</span> <span class="o">[</span><span class="s1">&#39;sql1&#39;</span><span class="o">]</span>
        <span class="p">}</span>
        <span class="n">ansible</span><span class="o">.</span><span class="n">extra_vars</span> <span class="o">=</span> <span class="p">{</span>
            <span class="ss">ansible_ssh_user</span><span class="p">:</span> <span class="s1">&#39;vagrant&#39;</span><span class="p">,</span>
            <span class="ss">ansible_connection</span><span class="p">:</span> <span class="s1">&#39;ssh&#39;</span><span class="p">,</span>
            <span class="ss">ansible_ssh_args</span><span class="p">:</span> <span class="s1">&#39;-o ForwardAgent=yes -A&#39;</span><span class="p">,</span>
            <span class="ss">set_env</span><span class="p">:</span> <span class="s2">&#34;</span><span class="si">#{</span><span class="n">deploy_env</span><span class="si">}</span><span class="s2">&#34;</span><span class="p">,</span>
        <span class="p">}</span>
    <span class="k">end</span>
<span class="k">end</span></code></pre></div>
<p>I hope you&rsquo;ll win a lot of time, because I&rsquo;ll loose too much IMO :-p</p>

              


            </div>
          </div>
          <div id="post-footer" class="post-footer main-content-wrap">
            
              
                
                
                  <div class="post-footer-tags">
                    <span class="text-color-light text-small">TAGGED IN</span><br/>
                    
  <a class="tag tag--primary tag--small" href="https://blog.deimos.fr/tags/ansible/">ansible</a>

  <a class="tag tag--primary tag--small" href="https://blog.deimos.fr/tags/docker/">docker</a>

  <a class="tag tag--primary tag--small" href="https://blog.deimos.fr/tags/vagrant/">vagrant</a>

  <a class="tag tag--primary tag--small" href="https://blog.deimos.fr/tags/virtualbox/">virtualbox</a>

                  </div>
                
              
            
            
<div class="post-actions-wrap">
  <nav >
    <ul class="post-actions post-action-nav">
      
        <li class="post-action">
          
            <a class="post-action-btn btn btn--default tooltip--top" href="https://blog.deimos.fr/2015/01/16/packer-build-multiple-images-easily/" data-tooltip="Packer: build multiple images easily" aria-label="NEXT: Packer: build multiple images easily">
          
              <i class="fa fa-angle-left"></i>
              <span class="hide-xs hide-sm text-small icon-ml">NEXT</span>
            </a>
        </li>
        <li class="post-action">
          
            <a class="post-action-btn btn btn--default tooltip--top" href="https://blog.deimos.fr/2015/01/08/vagrant-manage-docker-virtualbox-easily/" data-tooltip="Vagrant: manage Docker &#43; VirtualBox easily" aria-label="PREVIOUS: Vagrant: manage Docker &#43; VirtualBox easily">
          
              <span class="hide-xs hide-sm text-small icon-mr">PREVIOUS</span>
              <i class="fa fa-angle-right"></i>
            </a>
        </li>
      
    </ul>
  </nav>
<ul class="post-actions post-action-share" >
  
    <li class="post-action hide-lg hide-md hide-sm">
      <a class="post-action-btn btn btn--default btn-open-shareoptions" href="#btn-open-shareoptions" aria-label="Share this post">
        <i class="fa fa-share-alt" aria-hidden="true"></i>
      </a>
    </li>
    
      <li class="post-action hide-xs">
        <a class="post-action-btn btn btn--default" target="new" href="https://www.facebook.com/sharer/sharer.php?u=https://blog.deimos.fr/2015/01/13/vagrant-provision-vms-and-containers-with-ansible/" title="Share on Facebook" aria-label="Share on Facebook">
          <i class="fa-facebook-official" aria-hidden="true"></i>
        </a>
      </li>
    
      <li class="post-action hide-xs">
        <a class="post-action-btn btn btn--default" target="new" href="https://twitter.com/intent/tweet?text=https://blog.deimos.fr/2015/01/13/vagrant-provision-vms-and-containers-with-ansible/" title="Share on Twitter" aria-label="Share on Twitter">
          <i class="fa-twitter" aria-hidden="true"></i>
        </a>
      </li>
    
  
  
  <li class="post-action">
    
      <a class="post-action-btn btn btn--default" href="#top" aria-label="Back to top">
      <i class="fa fa-arrow-up" aria-hidden="true"></i>
    
    </a>
  </li>
</ul>
</div>


            
  


          </div>
        </article>
        <footer id="footer" class="main-content-wrap">
  <span class="copyrights">
    &copy; 2021 Pierre Mavro / Deimosfr. All Rights Reserved
  </span>
</footer>

      </div>
      <div id="bottom-bar" class="post-bottom-bar" data-behavior="5">
        
<div class="post-actions-wrap">
  <nav >
    <ul class="post-actions post-action-nav">
      
        <li class="post-action">
          
            <a class="post-action-btn btn btn--default tooltip--top" href="https://blog.deimos.fr/2015/01/16/packer-build-multiple-images-easily/" data-tooltip="Packer: build multiple images easily" aria-label="NEXT: Packer: build multiple images easily">
          
              <i class="fa fa-angle-left"></i>
              <span class="hide-xs hide-sm text-small icon-ml">NEXT</span>
            </a>
        </li>
        <li class="post-action">
          
            <a class="post-action-btn btn btn--default tooltip--top" href="https://blog.deimos.fr/2015/01/08/vagrant-manage-docker-virtualbox-easily/" data-tooltip="Vagrant: manage Docker &#43; VirtualBox easily" aria-label="PREVIOUS: Vagrant: manage Docker &#43; VirtualBox easily">
          
              <span class="hide-xs hide-sm text-small icon-mr">PREVIOUS</span>
              <i class="fa fa-angle-right"></i>
            </a>
        </li>
      
    </ul>
  </nav>
<ul class="post-actions post-action-share" >
  
    <li class="post-action hide-lg hide-md hide-sm">
      <a class="post-action-btn btn btn--default btn-open-shareoptions" href="#btn-open-shareoptions" aria-label="Share this post">
        <i class="fa fa-share-alt" aria-hidden="true"></i>
      </a>
    </li>
    
      <li class="post-action hide-xs">
        <a class="post-action-btn btn btn--default" target="new" href="https://www.facebook.com/sharer/sharer.php?u=https://blog.deimos.fr/2015/01/13/vagrant-provision-vms-and-containers-with-ansible/" title="Share on Facebook" aria-label="Share on Facebook">
          <i class="fa-facebook-official" aria-hidden="true"></i>
        </a>
      </li>
    
      <li class="post-action hide-xs">
        <a class="post-action-btn btn btn--default" target="new" href="https://twitter.com/intent/tweet?text=https://blog.deimos.fr/2015/01/13/vagrant-provision-vms-and-containers-with-ansible/" title="Share on Twitter" aria-label="Share on Twitter">
          <i class="fa-twitter" aria-hidden="true"></i>
        </a>
      </li>
    
  
  
  <li class="post-action">
    
      <a class="post-action-btn btn btn--default" href="#top" aria-label="Back to top">
      <i class="fa fa-arrow-up" aria-hidden="true"></i>
    
    </a>
  </li>
</ul>
</div>


      </div>
      
<div id="share-options-bar" class="share-options-bar" data-behavior="5">
  <i id="btn-close-shareoptions" class="fa fa-times"></i>
  <ul class="share-options">
    
      <li class="share-option">
        <a class="share-option-btn" target="new" href="https://www.facebook.com/sharer/sharer.php?u=https%3A%2F%2Fblog.deimos.fr%2F2015%2F01%2F13%2Fvagrant-provision-vms-and-containers-with-ansible%2F" aria-label="Share on Facebook">
          <i class="fa-facebook-official" aria-hidden="true"></i><span>Share on Facebook</span>
        </a>
      </li>
    
      <li class="share-option">
        <a class="share-option-btn" target="new" href="https://twitter.com/intent/tweet?text=https%3A%2F%2Fblog.deimos.fr%2F2015%2F01%2F13%2Fvagrant-provision-vms-and-containers-with-ansible%2F" aria-label="Share on Twitter">
          <i class="fa-twitter" aria-hidden="true"></i><span>Share on Twitter</span>
        </a>
      </li>
    
  </ul>
</div>
<div id="share-options-mask" class="share-options-mask"></div>


    </div>
    
    <div id="about">
  <div id="about-card">
    <div id="about-btn-close">
      <i class="fa fa-times"></i>
    </div>
    
      <img id="about-card-picture" src="https://www.gravatar.com/avatar/194382a6478d109ac45c9b11bad1945e?s=110" alt="Author&#39;s picture" />
    
    <h4 id="about-card-name">Pierre Mavro / Deimosfr</h4>
    
    
      <div id="about-card-job">
        <i class="fa fa-briefcase"></i>
        <br/>
        Qovery Co-Founder and CTO
      </div>
    
    
      <div id="about-card-location">
        <i class="fa fa-map-marker-alt"></i>
        <br/>
        Paris - France
      </div>
    
  </div>
</div>

    

    
  
    
      
      <div id="cover" style="background-image:url('https://blog.deimos.fr/images/fish_background.jpg');"></div>
    
  


    
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js" integrity="sha512-894YE6QWD5I59HgZOGReFYm4dnWc1Qt5NtvYSaNcOP+u1T9qYdvdihz0PPSiiqn/+/3e7Jo4EaG7TubfWGUrMQ==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.1.0/highlight.min.js" integrity="sha512-z+/WWfyD5tccCukM4VvONpEtLmbAm5LDu7eKiyMQJ9m7OfPEDL7gENyDRL3Yfe8XAuGsS2fS4xSMnl6d30kqGQ==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>

<script src="https://cdnjs.cloudflare.com/ajax/libs/fancybox/3.5.7/jquery.fancybox.min.js" integrity="sha512-uURl+ZXMBrF4AwGaWmEetzrd+J5/8NRkWAvJx5sbPSSuOb0bZLqf+tOzniObO00BjHa/dD7gub9oCGMLPQHtQA==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>


<script src="https://blog.deimos.fr/js/script-yqzy9wdlzix4lbbwdnzvwx3egsne77earqmn73v9uno8aupuph8wfguccut.min.js"></script>


  
    <script src="https://blog.deimos.fr/js/custom.js"></script>
  


<script>
$(document).ready(function() {
  hljs.configure({ classPrefix: '', useBR: false });
  $('pre.code-highlight > code, pre > code').each(function(i, block) {
    if (!$(this).hasClass('codeblock')) {
      $(this).addClass('codeblock');
    }
    hljs.highlightBlock(block);
  });
});
</script>




    
  </body>
</html>

