<!doctype html><html lang=en-us><head><script type=application/ld+json>{"@context":"http://schema.org","@type":"Website","@id":"https:\/\/blog.deimos.fr","author":{"@type":"Person","name":"Pierre Mavro / Deimosfr","image":"https://www.gravatar.com/avatar/194382a6478d109ac45c9b11bad1945e"},"name":"Deimosfr Blog","description":"Deimos Blog","url":"https:\/\/blog.deimos.fr\/tags\/ansible\/","keywords":"[]"}</script><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=generator content="Hugo 0.69.2 with theme Tranquilpeak 0.5.3-BETA"><meta name=author content="Pierre Mavro / Deimosfr"><meta name=keywords content><meta name=description content="Deimos Blog"><meta property="og:description" content="Deimos Blog"><meta property="og:type" content="website"><meta property="og:title" content="Ansible"><meta name=twitter:title content="Ansible"><meta property="og:url" content="https://blog.deimos.fr/tags/ansible/"><meta property="twitter:url" content="https://blog.deimos.fr/tags/ansible/"><meta property="og:site_name" content="Deimosfr Blog"><meta property="og:description" content="Deimos Blog"><meta name=twitter:description content="Deimos Blog"><meta property="og:locale" content="en-us"><meta name=twitter:card content="summary"><meta name=twitter:site content="@deimosfr"><meta name=twitter:creator content="@deimosfr"><meta property="og:image" content="https://www.gravatar.com/avatar/194382a6478d109ac45c9b11bad1945e?s=640"><meta property="twitter:image" content="https://www.gravatar.com/avatar/194382a6478d109ac45c9b11bad1945e?s=640"><title>Ansible</title><link rel=icon href=https://blog.deimos.fr/favicon.png><link rel=alternate type=application/rss+xml title=RSS href=https://blog.deimos.fr/tags/ansible/index.xml><link rel=canonical href=https://blog.deimos.fr/tags/ansible/><link rel=stylesheet href=https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css integrity="sha512-iBBXm8fW90+nuLcSKlbmrPcLa0OT92xO1BIsZ+ywDWZCvqsWgccV3gFoRBv0z+8dLJgyAHIhR35VZc2oM/gI1w==" crossorigin=anonymous referrerpolicy=no-referrer><link rel=stylesheet href=https://cdnjs.cloudflare.com/ajax/libs/fancybox/3.5.7/jquery.fancybox.min.css integrity="sha512-H9jrZiiopUdsLpg94A333EfumgUBpO9MdbxStdeITo+KEIMaNfHNvwyjjDJb+ERPaRS6DpyRlKbvPUasNItRyw==" crossorigin=anonymous referrerpolicy=no-referrer><link rel=stylesheet href=https://blog.deimos.fr/css/style-h6ccsoet3mzkbb0wngshlfbaweimexgqcxj0h5hu4h82olsdzz6wmqdkajm.min.css><link rel=stylesheet href=https://blog.deimos.fr/css/custom.css><script type=application/javascript>var doNotTrack=false;if(!doNotTrack){(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');ga('create','UA-63927289-1','auto');ga('send','pageview');}</script></head><body><div id=blog><header id=header data-behavior=2><i id=btn-open-sidebar class="fa fa-lg fa-bars"></i><div class=header-title><a class=header-title-link href=https://blog.deimos.fr/ aria-label="Go to homepage">Deimosfr Blog</a></div><a class=header-right-picture href=https://blog.deimos.fr/#about aria-label="Open the link: /#about"><img class=header-picture src="https://www.gravatar.com/avatar/194382a6478d109ac45c9b11bad1945e?s=90" alt="Author's picture"></a></header><nav id=sidebar data-behavior=2><div class=sidebar-container><div class=sidebar-profile><a href=https://blog.deimos.fr/#about aria-label="Read more about the author"><img class=sidebar-profile-picture src="https://www.gravatar.com/avatar/194382a6478d109ac45c9b11bad1945e?s=110" alt="Author's picture"></a><h4 class=sidebar-profile-name>Pierre Mavro / Deimosfr</h4></div><ul class=sidebar-buttons><li class=sidebar-button><a class=sidebar-button-link href=https://blog.deimos.fr/ title=Home><i class="sidebar-button-icon fas fa-lg fa-home" aria-hidden=true></i><span class=sidebar-button-desc>Home</span></a></li><li class=sidebar-button><a class=sidebar-button-link href=https://blog.deimos.fr/archives title=Archives><i class="sidebar-button-icon fas fa-lg fa-archive" aria-hidden=true></i><span class=sidebar-button-desc>Archives</span></a></li><li class=sidebar-button><a class=sidebar-button-link href=https://blog.deimos.fr/categories title=Categories><i class="sidebar-button-icon fas fa-lg fa-bookmark" aria-hidden=true></i><span class=sidebar-button-desc>Categories</span></a></li><li class=sidebar-button><a class=sidebar-button-link href=https://blog.deimos.fr/tags title=Tags><i class="sidebar-button-icon fas fa-lg fa-tags" aria-hidden=true></i><span class=sidebar-button-desc>Tags</span></a></li><li class=sidebar-button><a class=sidebar-button-link href=https://blog.deimos.fr/index.xml title=RSS><i class="sidebar-button-icon fa fa-lg fa-rss"></i><span class=sidebar-button-desc>RSS</span></a></li></ul><ul class=sidebar-buttons><li class=sidebar-button><a class=sidebar-button-link href=https://github.com/deimosfr target=_blank rel=noopener title=GitHub><i class="sidebar-button-icon fab fa-lg fa-github" aria-hidden=true></i><span class=sidebar-button-desc>GitHub</span></a></li><li class=sidebar-button><a class=sidebar-button-link href=https://wiki.deimos.fr target=_blank rel=noopener title=Wiki><i class="sidebar-button-icon fa fa-wikipedia-w"></i><span class=sidebar-button-desc>Wiki</span></a></li></ul><ul class=sidebar-buttons><li class=sidebar-button><a class=sidebar-button-link href=https://www.deimos.fr target=_blank rel=noopener title=About><i class="sidebar-button-icon fas fa-lg fa-question" aria-hidden=true></i><span class=sidebar-button-desc>About</span></a></li></ul></div></nav><div id=main data-behavior=2 class=hasCoverMetaIn><section class="postShorten-group main-content-wrap"><article class="postShorten postShorten--thumbnailimg-left"><div class=postShorten-wrap><div class=postShorten-header><h1 class=postShorten-title><a class=link-unstyled href=https://blog.deimos.fr/2017/04/18/deploy-kubernetes-with-ansible/ aria-label="Open the post: Deploy Kubernetes with Ansible">Deploy Kubernetes with Ansible</a></h1><div class="postShorten-meta post-meta"><time datetime=2017-04-18T20:18:07+02:00>18 April 2017</time>
<span>in</span>
<a class=category-link href=https://blog.deimos.fr/categories/ansible>Ansible</a>,
<a class=category-link href=https://blog.deimos.fr/categories/cloud>Cloud</a>,
<a class=category-link href=https://blog.deimos.fr/categories/kubernetes>Kubernetes</a></div></div><div class=postShorten-excerpt>Kubernetes is an open-source system for automating deployment, scaling, and management of containerized applications. I&rsquo;m using it for Nousmotards and decided to build an Ansible role for it to make it simpler to deploy.
Why did I built it as other projects like Kargo already exists? I just wanted a simple and maintainable role based on CoreOS official documentation. That&rsquo;s what I did:
This role bootstrap a Kubernetes cluster based on CoreOS Container Linux for production usages.<p><a href=https://blog.deimos.fr/2017/04/18/deploy-kubernetes-with-ansible/ class="postShorten-excerpt_link link" aria-label="Open the post: Deploy Kubernetes with Ansible">Continue reading</a></p></div></div><a href=https://blog.deimos.fr/2017/04/18/deploy-kubernetes-with-ansible/ aria-label="Open the post: Deploy Kubernetes with Ansible"><div class=postShorten-thumbnailimg><img alt src=https://blog.deimos.fr/thumbnails/logo_kubernetes.png></div></a></article><article class="postShorten postShorten--thumbnailimg-left"><div class=postShorten-wrap><div class=postShorten-header><h1 class=postShorten-title><a class=link-unstyled href=https://blog.deimos.fr/2016/01/21/zero-downtime-upgrade-with-ansible-and-haproxy/ aria-label="Open the post: Zero downtime upgrade with Ansible and HAProxy">Zero downtime upgrade with Ansible and HAProxy</a></h1><div class="postShorten-meta post-meta"><time datetime=2016-01-21T13:00:16Z>21 January 2016</time>
<span>in</span>
<a class=category-link href=https://blog.deimos.fr/categories/ansible>Ansible</a>,
<a class=category-link href=https://blog.deimos.fr/categories/debian>Debian</a>,
<a class=category-link href=https://blog.deimos.fr/categories/docker>Docker</a>,
<a class=category-link href=https://blog.deimos.fr/categories/ha>HA</a>,
<a class=category-link href=https://blog.deimos.fr/categories/hi-tech>Hi-Tech</a>,
<a class=category-link href=https://blog.deimos.fr/categories/linux>Linux</a>,
<a class=category-link href=https://blog.deimos.fr/categories/nousmotards>Nousmotards</a>,
<a class=category-link href=https://blog.deimos.fr/categories/red-hat>Red Hat</a></div></div><div class=postShorten-excerpt>Some of you may not be familiar with the terms &ldquo;Rolling upgrade&rdquo; or &ldquo;Rolling restart". This is the action of upgrading or restarting a cluster without service interruption (alias zero downtime). In most cases, this is done node by node, but in fact it depends of the technology you&rsquo;re managing and the number of active nodes in your cluster.
At Nousmotards we have several Java Spring Boot applications running. Restarting one application can take up to 1 min.<p><a href=https://blog.deimos.fr/2016/01/21/zero-downtime-upgrade-with-ansible-and-haproxy/ class="postShorten-excerpt_link link" aria-label="Open the post: Zero downtime upgrade with Ansible and HAProxy">Continue reading</a></p></div></div><a href=https://blog.deimos.fr/2016/01/21/zero-downtime-upgrade-with-ansible-and-haproxy/ aria-label="Open the post: Zero downtime upgrade with Ansible and HAProxy"><div class=postShorten-thumbnailimg><img alt src=https://blog.deimos.fr/thumbnails/logo_ansible.png></div></a></article><article class="postShorten postShorten--thumbnailimg-left"><div class=postShorten-wrap><div class=postShorten-header><h1 class=postShorten-title><a class=link-unstyled href=https://blog.deimos.fr/2015/11/27/upgrading-ansible-consul-template-role/ aria-label="Open the post: Upgrading Ansible Consul Template role">Upgrading Ansible Consul Template role</a></h1><div class="postShorten-meta post-meta"><time datetime=2015-11-27T21:34:03Z>27 November 2015</time>
<span>in</span>
<a class=category-link href=https://blog.deimos.fr/categories/ansible>Ansible</a>,
<a class=category-link href=https://blog.deimos.fr/categories/cloud>Cloud</a>,
<a class=category-link href=https://blog.deimos.fr/categories/debian>Debian</a>,
<a class=category-link href=https://blog.deimos.fr/categories/hi-tech>Hi-Tech</a>,
<a class=category-link href=https://blog.deimos.fr/categories/linux>Linux</a>,
<a class=category-link href=https://blog.deimos.fr/categories/red-hat>Red Hat</a></div></div><div class=postShorten-excerpt>As I wanted to upgrade it and because it has been asked several time, I upgraded the consul-template Ansible role to manage official binaries (and upgrades). Here are the new vars:
consul_template_version:'0.11.0'consul_template_arch:'linux_amd64'consul_template_http_src:"https://github.com/hashicorp/consul-template/releases/download/v{{consul_template_version}}/consul_template_{{consul_template_version}}_{{consul_template_arch}}.zip" You can of course find the role to Ansible Galaxy: https://galaxy.ansible.com/deimosfr/consul-template/
I hope you&rsquo;ll enjoy this new version :-)<p><a href=https://blog.deimos.fr/2015/11/27/upgrading-ansible-consul-template-role/ class="postShorten-excerpt_link link" aria-label="Open the post: Upgrading Ansible Consul Template role">Continue reading</a></p></div></div><a href=https://blog.deimos.fr/2015/11/27/upgrading-ansible-consul-template-role/ aria-label="Open the post: Upgrading Ansible Consul Template role"><div class=postShorten-thumbnailimg><img alt src=https://blog.deimos.fr/thumbnails/logo_ansible.png></div></a></article><article class="postShorten postShorten--thumbnailimg-left"><div class=postShorten-wrap><div class=postShorten-header><h1 class=postShorten-title><a class=link-unstyled href=https://blog.deimos.fr/2015/02/27/ansible-neo4j-role-available-on-ansible-galaxy/ aria-label="Open the post: Ansible: Neo4j role available on Ansible Galaxy">Ansible: Neo4j role available on Ansible Galaxy</a></h1><div class="postShorten-meta post-meta"><time datetime=2015-02-27T11:00:01Z>27 February 2015</time>
<span>in</span>
<a class=category-link href=https://blog.deimos.fr/categories/ansible>Ansible</a>,
<a class=category-link href=https://blog.deimos.fr/categories/databases>Databases</a>,
<a class=category-link href=https://blog.deimos.fr/categories/debian>Debian</a>,
<a class=category-link href=https://blog.deimos.fr/categories/hi-tech>Hi-Tech</a>,
<a class=category-link href=https://blog.deimos.fr/categories/linux>Linux</a>,
<a class=category-link href=https://blog.deimos.fr/categories/nosql>NoSQL</a>,
<a class=category-link href=https://blog.deimos.fr/categories/sql>SQL</a></div></div><div class=postShorten-excerpt>For a new project (will talk about it later), I needed to use Neo4J (graph database if you don&rsquo;t know it yet).
I tried to cover more features than the current existing Ansible roles available on Ansible Galaxy. More will come in the next weeks. I also tried to make it simple to install it and do not force dependencies at maximum. Here are parameters you can set:
# Select neo4j version neo4j_package: neo4j # community version #neo4j_package: neo4j-advanced #neo4j_package: neo4j-enterprise # Neo4j spatial plugin neo4j_install_spatial: false neo4j_spatial_version: '0.<p><a href=https://blog.deimos.fr/2015/02/27/ansible-neo4j-role-available-on-ansible-galaxy/ class="postShorten-excerpt_link link" aria-label="Open the post: Ansible: Neo4j role available on Ansible Galaxy">Continue reading</a></p></div></div><a href=https://blog.deimos.fr/2015/02/27/ansible-neo4j-role-available-on-ansible-galaxy/ aria-label="Open the post: Ansible: Neo4j role available on Ansible Galaxy"><div class=postShorten-thumbnailimg><img alt src=https://blog.deimos.fr/thumbnails/logo_neo4j.png></div></a></article><article class="postShorten postShorten--thumbnailimg-left"><div class=postShorten-wrap><div class=postShorten-header><h1 class=postShorten-title><a class=link-unstyled href=https://blog.deimos.fr/2015/02/25/ansible-lxc-role-updated-for-jessie/ aria-label="Open the post: Ansible: LXC role updated for Jessie">Ansible: LXC role updated for Jessie</a></h1><div class="postShorten-meta post-meta"><time datetime=2015-02-25T11:00:40Z>25 February 2015</time>
<span>in</span>
<a class=category-link href=https://blog.deimos.fr/categories/ansible>Ansible</a>,
<a class=category-link href=https://blog.deimos.fr/categories/debian>Debian</a>,
<a class=category-link href=https://blog.deimos.fr/categories/hi-tech>Hi-Tech</a>,
<a class=category-link href=https://blog.deimos.fr/categories/linux>Linux</a></div></div><div class=postShorten-excerpt>Since several weeks, I&rsquo;m playing a lot with Debian Jessie as a server. I discovered some bugs, reported them to Debian, they&rsquo;ve been fixed etc&mldr;good news! I also wanted to test the new version of LXC.
So I decided to upgrade my 2 personal servers to Jessie. But that wasn&rsquo;t so easy with Systemd. I still encounter non critical issues and going to prepare report bugs for Debian (cgroups issues with systemd).<p><a href=https://blog.deimos.fr/2015/02/25/ansible-lxc-role-updated-for-jessie/ class="postShorten-excerpt_link link" aria-label="Open the post: Ansible: LXC role updated for Jessie">Continue reading</a></p></div></div><a href=https://blog.deimos.fr/2015/02/25/ansible-lxc-role-updated-for-jessie/ aria-label="Open the post: Ansible: LXC role updated for Jessie"><div class=postShorten-thumbnailimg><img alt src=https://blog.deimos.fr/thumbnails/logo_lxc.png></div></a></article><article class="postShorten postShorten--thumbnailimg-left"><div class=postShorten-wrap><div class=postShorten-header><h1 class=postShorten-title><a class=link-unstyled href=https://blog.deimos.fr/2015/01/22/packer-role-available-on-ansible-galaxy/ aria-label="Open the post: Packer role available on Ansible Galaxy">Packer role available on Ansible Galaxy</a></h1><div class="postShorten-meta post-meta"><time datetime=2015-01-22T11:00:56Z>22 January 2015</time>
<span>in</span>
<a class=category-link href=https://blog.deimos.fr/categories/ansible>Ansible</a>,
<a class=category-link href=https://blog.deimos.fr/categories/cloud>Cloud</a>,
<a class=category-link href=https://blog.deimos.fr/categories/hi-tech>Hi-Tech</a></div></div><div class=postShorten-excerpt>Packer is a really great solution to make an image in several formats (VirtualBox, Docker&mldr;). I recently wanted to deploy it on a Jenkins server to automatically perform image build with the help of Packer.
That&rsquo;s why I&rsquo;ve wrote a Packer role for Ansible really easy to use. You simply have to set (or let them by defaults) vars:
# Packer version to install packer_version: '0.7.5' # Packer destination folder packer_destination: '/usr/bin' It will install the desired version :-)<p><a href=https://blog.deimos.fr/2015/01/22/packer-role-available-on-ansible-galaxy/ class="postShorten-excerpt_link link" aria-label="Open the post: Packer role available on Ansible Galaxy">Continue reading</a></p></div></div><a href=https://blog.deimos.fr/2015/01/22/packer-role-available-on-ansible-galaxy/ aria-label="Open the post: Packer role available on Ansible Galaxy"><div class=postShorten-thumbnailimg><img alt src=https://blog.deimos.fr/thumbnails/logo_ansible.png></div></a></article><article class="postShorten postShorten--thumbnailimg-left"><div class=postShorten-wrap><div class=postShorten-header><h1 class=postShorten-title><a class=link-unstyled href=https://blog.deimos.fr/2015/01/16/packer-build-multiple-images-easily/ aria-label="Open the post: Packer: build multiple images easily">Packer: build multiple images easily</a></h1><div class="postShorten-meta post-meta"><time datetime=2015-01-16T11:00:52Z>16 January 2015</time>
<span>in</span>
<a class=category-link href=https://blog.deimos.fr/categories/ansible>Ansible</a>,
<a class=category-link href=https://blog.deimos.fr/categories/debian>Debian</a>,
<a class=category-link href=https://blog.deimos.fr/categories/docker>Docker</a>,
<a class=category-link href=https://blog.deimos.fr/categories/hi-tech>Hi-Tech</a>,
<a class=category-link href=https://blog.deimos.fr/categories/linux>Linux</a>,
<a class=category-link href=https://blog.deimos.fr/categories/red-hat>Red Hat</a>,
<a class=category-link href=https://blog.deimos.fr/categories/virtualization>Virtualization</a></div></div><div class=postShorten-excerpt>Packer is one of the tools I&rsquo;ve used in the past to build VirtualBox boxes. You can find what I&rsquo;ve done on my GitHub account.
For Smash project, I wanted to make a packer configuration to manage Docker and VirtualBox. I also wanted to call Ansible to build specific images for each needs. The goal is to be able to build cloud image ready to start, without any special dependencies. This because I need different usages:<p><a href=https://blog.deimos.fr/2015/01/16/packer-build-multiple-images-easily/ class="postShorten-excerpt_link link" aria-label="Open the post: Packer: build multiple images easily">Continue reading</a></p></div></div><a href=https://blog.deimos.fr/2015/01/16/packer-build-multiple-images-easily/ aria-label="Open the post: Packer: build multiple images easily"><div class=postShorten-thumbnailimg><img alt src=https://blog.deimos.fr/thumbnails/logo_packer.png></div></a></article><div class=pagination-bar><ul class=pagination><li class=pagination-next><a class="btn btn--default btn--small" href=https://blog.deimos.fr/tags/ansible/page/2/ aria-label="OLDER POSTS"><span>OLDER POSTS</span>
<i class="fa fa-angle-right text-base icon-ml"></i></a></li><li class=pagination-number>page 1 of 4</li></ul></div></section><footer id=footer class=main-content-wrap><span class=copyrights>&copy; 2023 Pierre Mavro / Deimosfr. All Rights Reserved</span></footer></div></div><div id=about><div id=about-card><div id=about-btn-close><i class="fa fa-times"></i></div><img id=about-card-picture src="https://www.gravatar.com/avatar/194382a6478d109ac45c9b11bad1945e?s=110" alt="Author's picture"><h4 id=about-card-name>Pierre Mavro / Deimosfr</h4><div id=about-card-job><i class="fa fa-briefcase"></i><br>Qovery Co-Founder and CTO</div><div id=about-card-location><i class="fa fa-map-marker-alt"></i><br>Paris - France</div></div></div><div id=cover style=background-image:url(https://blog.deimos.fr/images/fish_background.jpg)></div><script src=https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js integrity="sha512-894YE6QWD5I59HgZOGReFYm4dnWc1Qt5NtvYSaNcOP+u1T9qYdvdihz0PPSiiqn/+/3e7Jo4EaG7TubfWGUrMQ==" crossorigin=anonymous referrerpolicy=no-referrer></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.1.0/highlight.min.js integrity="sha512-z+/WWfyD5tccCukM4VvONpEtLmbAm5LDu7eKiyMQJ9m7OfPEDL7gENyDRL3Yfe8XAuGsS2fS4xSMnl6d30kqGQ==" crossorigin=anonymous referrerpolicy=no-referrer></script><script src=https://cdnjs.cloudflare.com/ajax/libs/fancybox/3.5.7/jquery.fancybox.min.js integrity="sha512-uURl+ZXMBrF4AwGaWmEetzrd+J5/8NRkWAvJx5sbPSSuOb0bZLqf+tOzniObO00BjHa/dD7gub9oCGMLPQHtQA==" crossorigin=anonymous referrerpolicy=no-referrer></script><script src=https://blog.deimos.fr/js/script-yqzy9wdlzix4lbbwdnzvwx3egsne77earqmn73v9uno8aupuph8wfguccut.min.js></script><script src=https://blog.deimos.fr/js/custom.js></script><script>$(document).ready(function(){hljs.configure({classPrefix:'',useBR:false});$('pre.code-highlight > code, pre > code').each(function(i,block){if(!$(this).hasClass('codeblock')){$(this).addClass('codeblock');}
hljs.highlightBlock(block);});});</script></body></html>